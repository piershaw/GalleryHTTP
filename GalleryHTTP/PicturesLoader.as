package {		import flash.display.*;	import fl.controls.ProgressBar;	import fl.controls.ProgressBarMode;	import fl.containers.UILoader;	import flash.events.*;	import flash.net.*;	import fl.data.DataProvider;	import flash.utils.*;	import flash.ui.*;		public class PicturesLoader extends MovieClip{				//www path to php file that gets all the pictures names from the database		public var picture_PHP_file_Path_Req:String;				//www		public var reqGet:URLRequest;		public var loaderGet:URLLoader;		public var varsGet:URLVariables;		public var pageFormat:String;				//last number in the array of pics		public var lastNum:Number;				public var isLoaded:Boolean;				public var gallarySettingsXML:GallarySettingsXML;		// all pics		public var pictureList:Array;				public function PicturesLoader() {						isLoaded = false;			pictureList = new Array();			varsGet = new URLVariables(); //post			pageFormat = URLLoaderDataFormat.TEXT; //change to new way			loaderGet = new URLLoader();//get results			gallarySettingsXML = new GallarySettingsXML();						addEventListener(Event.ENTER_FRAME, getReqPath);					}				public function getReqPath(event:Event):void{			//need in xml settings							if(gallarySettingsXML.isDone){					isLoaded = true;					//trace ("url " + gallarySettingsXML.theArray[0]);					reqPath = gallarySettingsXML.theArray[0].toString();					removeEventListener(Event.ENTER_FRAME, getReqPath);				}		}								public function set reqPath(path:String):void{			// xml settings				picture_PHP_file_Path_Req = path;//"http://localhost/GalleryHTTP/getPhotos.php";				startPHPUrlReq(path);//this path		}				public function get reqPath():String{			trace("url " + picture_PHP_file_Path_Req);			return picture_PHP_file_Path_Req;		}						private function startPHPUrlReq(path:String):void{						trace(reqPath);						picture_PHP_file_Path_Req = path;			reqGet = new URLRequest(path);			loaderGet.addEventListener(Event.COMPLETE, startLoading);			//loaderGet.addEventListener(IOErrorEvent.IO_ERROR, loadPageError);			loaderGet.dataFormat = URLLoaderDataFormat.TEXT;			varsGet = new URLVariables(loaderGet.data);			reqGet.method = URLRequestMethod.POST;			reqGet.data = varsGet;			loaderGet.load(reqGet);		}				//get all pics		private function startLoading(event:Event):void{			loaderGet.removeEventListener(Event.COMPLETE, startLoading);			//trace(reqGetShirts.data);			//trace(event.target.data);			var theContent:String = event.target.data.toString();			var contentArray:Array = theContent.split("%");									for each (var prop in contentArray){				pictureList.push(prop);				lastNum = contentArray.length -1;				trace("lastNum " + lastNum);			}					//pics			for(var i = 0; i < pictureList.length; i++){				trace("pics " + pictureList[i]);				//trace();			}								//clean list				if(pictureList[i] == undefined){					lastNum--;					trace("take out " + pictureList[i]);					trace("lastNum " + lastNum);				}else if( pictureList[i] == ""){					lastNum--;					trace("take out " + pictureList[i]);					trace("lastNum " + lastNum);				}														}	}	}